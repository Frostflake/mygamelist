{% load static %}
{% load humanize %}
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>{{ selected_user.username }} :: Remember Games</title>
	
	<meta name="twitter:card" content="summary" />
	<meta name="twitter:title" content="{{ selected_user.username }} :: Remember Games" />
	<meta name="twitter:description" content="Remember Games is a website you can use to track games you've played." />
	<meta name="twitter:image" content="{% if selected_user.userprofile.avatar %}{{ selected_user.userprofile.avatar.url }}{% else %}{% static 'default_avatar.png' %}{% endif %}" />
	
	<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
	<link href="{% static 'css/profile.css' %}" rel="stylesheet">
	<link href="{% static 'css/style.css' %}" rel="stylesheet">
	
	<style>
		body {
			background-image: url("{% static 'bgdark.png' %}");
			background-repeat: repeat;
			color: white;
		}
		a.gamelink {
			color: #CCBADC;
			text-decoration: none;
		}
		table {
			text-align: center;
		}
	</style>
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a class="navbar-brand" href="#">Remember Games</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
		<ul class="navbar-nav mr-auto">
		<li class="nav-item">
		<a class="nav-link" href="/">Home</a>
		</li>
		<li class="nav-item">
		<a class="nav-link" href="{% url 'games:gamelist' %}">My Games</a>
		</li>
		<li class="nav-item">
		<a class="nav-link" href="{% url 'games:browse' %}">Browse</a>
		</li>
		<li class="nav-item">
		<a class="nav-link" href="/forum">Forums</a>
		</li>
		</ul>
		{% if user.is_authenticated %}
			<a href="{% url 'games:profile' user.id user.username|slugify %}">
			{% if user.userprofile.avatar %}
			<img width="40" height="40" class="d-inline-block align-top rounded-circle" src="{{ user.userprofile.avatar.url }}">
			{% else %}
			<img width="40" height="40" class="d-inline-block align-top rounded-circle" src="{% static 'default_avatar.png' %}">
			{% endif %}
			</a>
		{% else %}<ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="{% url 'games:login' %}">Login</a></li></ul>
		{% endif %}
		</div>
	</nav>
<div class="container">
	<div class="profile">
		<div class="profile-header">
			<div class="profile-header-cover"></div>
			<div class="profile-header-content">
				<div class="profile-header-img">
					{% if selected_user.userprofile.avatar %}
					<img class="rounded-circle" src="{{ selected_user.userprofile.avatar.url }}">
					{% else %}
					<img class="rounded-circle" src="{% static 'default_avatar.png' %}">
					{% endif %}
				</div>
				<ul class="profile-header-tab nav nav-tabs nav-tabs-v2">
					<li class="nav-item">
						<a href="{% url 'games:profile' selected_user.id selected_user.username|slugify %}" class="nav-link{% if not tab %} active{% endif %}">
							<div class="nav-field">Activity</div>
						</a>
					</li>
					<li class="nav-item">
						<a href="{% url 'games:profile' selected_user.id selected_user.username|slugify 'list' %}" class="nav-link{% if tab == 'list' %} active{% endif %}">
							<div class="nav-field">Game List</div>
						</a>
					</li>
					<li class="nav-item">
						<a href="{% url 'games:profile' selected_user.id selected_user.username|slugify 'social' %}" class="nav-link{% if tab == 'social' %} active{% endif %}">
							<div class="nav-field">Social</div>
						</a>
					</li>
					<li class="nav-item">
						<a href="{% url 'games:profile' selected_user.id selected_user.username|slugify 'stats' %}" class="nav-link{% if tab == 'stats' %} active{% endif %}">
							<div class="nav-field">Stats</div>
						</a>
					</li>
					<li class="nav-item">
						<a href="{% url 'games:profile' selected_user.id selected_user.username|slugify 'contrib' %}" class="nav-link{% if tab == 'contrib' %} active{% endif %}">
							<div class="nav-field">Contributions</div>
						</a>
					</li>
				</ul>
			</div>
		</div>

		<div class="profile-container">
			<div class="profile-sidebar">
				<div class="desktop-sticky-top">
					<h4>{{ selected_user.username }}</h4>
					<div class="font-weight-600 mb-3 text-muted mt-n2">{{ selected_user.userprofile.title }}</div>
					<!--<p>
						Description
					</p>-->
				</div>
			</div>

			<div class="profile-content">
				<div class="row">
					<div class="col-xl-12">
						<div class="tab-content p-0">
							{% if not tab or tab == 'activity' %}
								{% for activity in activities %}
									<div class="text-white bg-dark mb-3 rounded" style="max-width: 100%">
										<div class="row align-items-center">
											<div class="col-md-auto" style="width:80px;">
												<img class="rounded" src="{{ activity.game.image.url }}" style="max-width: 80px; height: 130px; object-fit: cover;">
											</div>
											<div class="col">
												<div class="card-header d-flex justify-content-between">
													<a class="gamelink" href="{% url 'games:profile' activity.user.id activity.user.username|slugify %}"> <img class="rounded" src="{{ activity.user.userprofile.avatar.url }}" style="max-width: 40px; height: 40px; margin-right:10px;">{{ activity.user.username }}</a>
													{{ activity.created_at|naturaltime }}
												</div>
												<div class="card-body">
													<p class="card-text">
														{% if activity.status == "PLAN" %}
															Plans to play 
														{% elif activity.status == "PLAY" %}
															Started playing 
														{% elif activity.status == "CMPL" %}
															Completed
														{% elif activity.status == "DROP" %}
															Dropped 
														{% elif activity.status == "HOLD" %}
															Paused 
														{% endif %}
														<a class="gamelink" href="{% url 'games:game' activity.game.id activity.game.name|slugify %}">{{ activity.game.name }}</a>
													</p>
												</div>
											</div>
										</div>
									</div>
								{% endfor %}
							{% elif tab == 'list' %}
								{% for status, game_list in total_list.items %}
									{% if status != 'Imported' %}
										<table class="table table-hover table-striped table-dark">
										<tr><td colspan="5"><h3><center>{{ status }}</center></h3></td></tr>
										<tr>
										<th scope="col" width="50%">Game Title</th>
										<th scope="col" width="15%">Platform</th>
										<th scope="col" width="10%">Score</th>
										<th scope="col" width="10%">Hours</th>
										<th scope="col" width="15%">Flags</th>
										</tr>
											{% for entry_name, entry in game_list.items %}
											<tr>
												<td>{% if entry.game_id %}<a class="gamelink" href="{% url 'games:game' entry.game_id entry_name|slugify %}">{% endif %}{{ entry_name }}{% if entry.game_id %}</a>{% endif %}</td>
												<td>{{ entry.platform.name }}</td>
												<td>{{ entry.score }}</td>
												<td>{{ entry.hours }}</td>
												<td>
													{% if entry.comments %}<span title="{{ entry.comments }}">&#x1F4AC;</span>{% endif %}
													{% if entry.times_replayed > 0 %}<span title="Replayed {{ entry.times_replayed }} time{% if entry.times_replayed > 1 %}s{% endif %}!">&#x1F501;</span>{% endif %}
												</td>
											</tr>
											{% endfor %}
										</table>
									{% endif %}
								{% endfor %}
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
	<div class="footer">
		<div class="col-md-12" align="center">
			<a href="https://github.com/Frostflake/mygamelist">GitHub</a>
		</div>
	</div>

	<script src="{% static 'js/jquery.min.js' %}"></script>
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<script src="{% static 'js/scripts.js' %}"></script>
</body>